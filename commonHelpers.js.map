{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import './style.css'\nimport axios from 'axios'\n\n// Створи фільмотеку з популярними фільмами, для цього використай\n// https://developer.themoviedb.org/reference/trending-movies\n\n// Щоб отримати постер фільму потрібно підставити url з відповіді від бекенду та url з документації\n// https://developer.themoviedb.org/docs/image-basics\n\n// Відмалюй картки з фільмами\n// Приклад картки  => https://prnt.sc/Hi_iLLg7Nd1F\n\n// Реалізуй пагінацію\n// 1 Кнопка \"Load More\"\n// 2 Infinity scroll (https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)\n\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst END_POINT = '/trending/movie/week';\nconst API_KEY = '345007f9ab440e5b86cef51be6397df1';\n\nlet page = 1;\n\nconst selectors = {\n    container: document.querySelector('.js-movie-list'),\n    loadBtn: document.querySelector('.js-load-more')\n}\n\nselectors.loadBtn.addEventListener('click', loadMore);\n\nserviceMovie(page)\n.then(data => {\n    selectors.container.insertAdjacentHTML('beforeend', createMarkup(data.results))\n    // if(data.page <= data.total_pages) {}\n    if(data.page < 500) {\n        selectors.loadBtn.classList.replace('load-more-hidden', 'load-more')\n    }\n})\n.catch(error => alert(error.message))\n    \nasync function serviceMovie(page = 1) {\n    const { data } = await axios(`${BASE_URL}${END_POINT}`, { \n        params: {\n            api_key: API_KEY,\n            page\n        }\n    })\n    return data;\n}\n\nfunction createMarkup(arr) {\n    return arr.map(({id, poster_path, original_title, release_date, vote_average }) => `\n     <li class=\"movie-card\" data-id=\"${id}\">\n        <img src=\"https://image.tmdb.org/t/p/w300${poster_path}\" alt=\"${original_title}\">\n        <div class=\"movie-info\"></div>\n        <h2>${original_title}</h2>\n        <p>Release Date: ${release_date}</p>\n        <p>Vote Average: ${vote_average}</p>\n    </li>`).join(\"\")\n}\n\nasync function loadMore() {\n    page += 1;\n    selectors.loadBtn.disabled = true;\n    try {\n        const data = await serviceMovie(page);\n        selectors.container.insertAdjacentHTML('beforeend', createMarkup(data.results));\n        selectors.loadBtn.disabled = false;\n\n        \n        const card = document.querySelector(\".movie-card\");\n        const cardHeight = card.getBoundingClientRect().height;\n\n        window.scrollBy({\n            left: 0,\n            top: cardHeight * 2,\n            behavior: \"smooth\"\n        })\n\n        if(data.page < 500) {\n            selectors.loadBtn.classList.replace('load-more', 'load-more-hidden')\n        \n        }\n    } catch(error) {\n        alert(error.message)\n    }\n} "],"names":["BASE_URL","END_POINT","API_KEY","page","selectors","loadMore","serviceMovie","data","createMarkup","error","axios","arr","id","poster_path","original_title","release_date","vote_average","cardHeight"],"mappings":"svBAiBA,MAAMA,EAAW,+BACXC,EAAY,uBACZC,EAAU,mCAEhB,IAAIC,EAAO,EAEX,MAAMC,EAAY,CACd,UAAW,SAAS,cAAc,gBAAgB,EAClD,QAAS,SAAS,cAAc,eAAe,CACnD,EAEAA,EAAU,QAAQ,iBAAiB,QAASC,CAAQ,EAEpDC,EAAaH,CAAI,EAChB,KAAKI,GAAQ,CACVH,EAAU,UAAU,mBAAmB,YAAaI,EAAaD,EAAK,OAAO,CAAC,EAE3EA,EAAK,KAAO,KACXH,EAAU,QAAQ,UAAU,QAAQ,mBAAoB,WAAW,CAE3E,CAAC,EACA,MAAMK,GAAS,MAAMA,EAAM,OAAO,CAAC,EAEpC,eAAeH,EAAaH,EAAO,EAAG,CAClC,KAAM,CAAE,KAAAI,CAAM,EAAG,MAAMG,EAAM,GAAGV,CAAQ,GAAGC,CAAS,GAAI,CACpD,OAAQ,CACJ,QAASC,EACT,KAAAC,CACH,CACT,CAAK,EACD,OAAOI,CACX,CAEA,SAASC,EAAaG,EAAK,CACvB,OAAOA,EAAI,IAAI,CAAC,CAAC,GAAAC,EAAI,YAAAC,EAAa,eAAAC,EAAgB,aAAAC,EAAc,aAAAC,CAAY,IAAO;AAAA,uCAChDJ,CAAE;AAAA,mDACUC,CAAW,UAAUC,CAAc;AAAA;AAAA,cAExEA,CAAc;AAAA,2BACDC,CAAY;AAAA,2BACZC,CAAY;AAAA,UAC7B,EAAE,KAAK,EAAE,CACnB,CAEA,eAAeX,GAAW,CACtBF,GAAQ,EACRC,EAAU,QAAQ,SAAW,GAC7B,GAAI,CACA,MAAMG,EAAO,MAAMD,EAAaH,CAAI,EACpCC,EAAU,UAAU,mBAAmB,YAAaI,EAAaD,EAAK,OAAO,CAAC,EAC9EH,EAAU,QAAQ,SAAW,GAI7B,MAAMa,EADO,SAAS,cAAc,aAAa,EACzB,sBAAqB,EAAG,OAEhD,OAAO,SAAS,CACZ,KAAM,EACN,IAAKA,EAAa,EAClB,SAAU,QACtB,CAAS,EAEEV,EAAK,KAAO,KACXH,EAAU,QAAQ,UAAU,QAAQ,YAAa,kBAAkB,CAG1E,OAAOK,EAAO,CACX,MAAMA,EAAM,OAAO,CACtB,CACL"}